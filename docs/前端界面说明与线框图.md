## 项目概述

本项目是一个围绕动画题材的“收集 + 抽卡 + 组卡 + 宅理论战”一体化前端应用。玩家可以：
- 抽取动画卡与角色卡，构建收藏与卡组
- 进入对战，与 AI 或另一位玩家进行回合制“宅理论战”
- 通过卡面点数、话术风格、被动光环与技能效果影响战局与声望、议题偏向

前端基于 Vue 3 + Pinia + TailwindCSS 构建。整体布局由 `App.vue` 提供：顶部头部区（登录/玩家信息）、左侧导航栏、右侧主内容区（路由视图）。


## 已实现的核心功能
- 登录/登出与基础玩家信息展示（用户名、等级、抽卡券数量）
- 抽卡系统（动画/角色）：卡池、商店、抽卡历史、结果弹窗与概率说明
- 收藏页：动画/角色收藏筛选、重复卡一键分解、卡组管理入口
- 战斗页：选卡组开局、对战 UI、战斗日志与议题偏向条、出牌/防御/结束回合、AI 基础逻辑
- 设置页：主题预设、战斗速度、AI 档案选择、议题偏向条样式切换


## 待实现/可拓展功能（方向）
- 更丰富的卡牌技能库与效果动画
- 更完善的 AI 策略（多样性档案、因局势自适应）
- 更复杂的战斗事件与结算表现（音效、特效、动效节奏）
- 收藏/卡组的导入导出与分享
- 成就/任务系统与活动玩法


## 全局布局（`App.vue`）

导航：主页、抽卡系统、卡牌收藏、宅理论战、设置。

```
+----------------------------------------------------------------------------------+
| Header:  Logo「动画宅的自我修养」 | 登录/玩家信息（用户名, Lv., 动画券/角色券, 登出）     |
+----------------------------------------------------------------------------------+
| Sidebar (nav)            | Main Content (RouterView)                            |
| - 主页                   |                                                      |
| - 抽卡系统               |  根据路由切换到对应页面                              |
| - 卡牌收藏               |                                                      |
| - 宅理论战               |                                                      |
| - 设置                   |                                                      |
+--------------------------+------------------------------------------------------+
```


## 页面与 ASCII 线框图

### 主页（`HomeView.vue`）
包含玩家状态、追番队列（独占一行）、下方两列：左侧活动日志、右侧收藏预览。

```
+--------------------------------- Home -----------------------------------------+
| PlayerStatus                                                                   |
|--------------------------------------------------------------------------------|
| WatchQueue                                                                     |
|--------------------------------------------------------------------------------|
| ActivityLog (left)                     | CollectionPreview (right)               |
|----------------------------------------+-----------------------------------------|
```


### 抽卡系统（`GachaView.vue`）
支持“动画抽卡/角色抽卡”切换；上方页签切换“卡池/商店/历史”；抽卡后弹出结果，概率说明单独弹窗。

```
+------------------------------ 抽卡系统（Gacha） --------------------------------+
| [ 动画抽卡 ] [ 角色抽卡 ]                                                       |
|--------------------------------------------------------------------------------|
| Tabs: [ 卡池 ] [ 商店 ] [ 历史 ]                                               |
|--------------------------------------------------------------------------------|
| if 卡池:                                                                        |
|  ├─ UpBanner（UP 信息）                                                         |
|  ├─ 资源展示：动画/角色券数量                                                   |
|  └─ 抽卡按钮：单抽 / 十连  （概率一览 链接）                                   |
|                                                                                |
| if 商店: GachaShop                                                              |
| if 历史: GachaHistory                                                           |
|                                                                                |
| 弹窗：                                                                          |
|  ├─ GachaResultModal（抽卡结果）                                                |
|  └─ GachaRatesModal（概率详情）                                                 |
+--------------------------------------------------------------------------------+
```


### 收藏（`CollectionsView.vue`）
三页签：动画收藏/角色收藏/我的卡组；支持名称/稀有度/标签筛选、重复卡一键分解；卡片网格 + 详情弹窗。

```
+---------------------------- 收藏（Collections） ---------------------------------+
| Tabs: [ 动画收藏 ] [ 角色收藏 ] [ 我的卡组 ]                                     |
|--------------------------------------------------------------------------------|
| Filters（当为动画/角色页签时显示）：                                            |
|  - 名称搜索 / 稀有度选择 /（动画）标签筛选 / 一键分解重复卡                     |
|--------------------------------------------------------------------------------|
| Content：                                                                       |
|  if 动画收藏: 网格 AnimeCard * N（点击打开 CardDetailModal）                    |
|  if 角色收藏: 网格 CharacterCard * N（点击打开 CardDetailModal）                |
|  if 我的卡组: DeckManager                                                       |
|                                                                                |
| 弹窗： CardDetailModal（展示卡面详情与持有数）                                  |
+--------------------------------------------------------------------------------+
```


### 宅理论战（`BattleView.vue`）
两阶段：选卡组（`DeckSelector`/随机开局）→ 战斗界面。战斗界面含：对手场、中央区（左日志/中偏向条+对线区/右操作）、我方场。

```
+------------------------------ 战斗（Battle） ------------------------------------+
| if 阶段=选卡组：                                                                |
|  └─ DeckSelector（选择卡组）/ 随机开局按钮                                      |
|--------------------------------------------------------------------------------|
| if 阶段=战斗：                                                                  |
|  对手场（PlayerField: playerB, isOpponent）                                     |
|--------------------------------------------------------------------------------|
|  中央区：                                                                       |
|   ┌───────────────┬───────────────────────────┬──────────────────────────────┐ |
|   │ BattleLog     │ TopicBiasBar + ClashZone  │ 操作区（EndTurn / 跳过防御） │ |
|   └───────────────┴───────────────────────────┴──────────────────────────────┘ |
|--------------------------------------------------------------------------------|
|  我方场（PlayerField: playerA）                                                 |
+--------------------------------------------------------------------------------+
```

说明：
- 处于防御阶段且当前主动玩家为 AI（`playerB`）时，页面右侧会出现“跳过防御”按钮（由 `BattleController.skipTurn()` 处理）。
- 战斗日志、议题偏向条、对线区对应组件：`BattleLog`、`TopicBiasBar`、`ClashZone`。


### 设置（`SettingsView.vue` + `SettingsModal.vue`）
以页面形式承载 `SettingsModal`，包含显示/音频页签；主题预设、战斗速度、AI 档案下拉、偏向条主题预览与样式选择、战斗内快速切换开关。

```
+------------------------------ 设置（Settings） ----------------------------------+
| SettingsModal                                                                   |
|  ├─ Tabs: [ 显示设置 ] [ 音频设置 ]                                            |
|  ├─ 显示设置：                                                                  |
|  │   - UI 主题预设（经典/赛博朋克/简约）                                       |
|  │   - 战斗速度（正常/快速/瞬间）                                              |
|  │   - AI 对手（档案下拉）                                                     |
|  │   - 议题偏向条样式预览与切换（gradient/cyber/elegant）                      |
|  │   - 战斗中显示快速切换开关                                                   |
|  └─ 音频设置：预留                                                              |
+--------------------------------------------------------------------------------+
```


## 结语
本文档面向前端层面的“页面与交互”说明，便于快速理解当前实现与页面骨架。后续如需扩展到接口/数据结构或战斗规则细节，可在 `docs/` 新增专题文档。


