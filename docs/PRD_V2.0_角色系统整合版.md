# PRD V2.0: 角色系统整合版 - 功能分析

## 1. 引言

本文档旨在梳理当前游戏 Demo (`frontend-vue`分支) 已包含的核心功能与系统元素。通过对现有组件和视图的分析，为后续迭代，特别是设计新的“战斗系统”提供清晰的上下文和基础。

## 2. 核心系统分析

基于代码结构，当前游戏主要由以下几个核心系统构成：

### 2.1. 角色与卡牌系统 (Character & Card System)

这是游戏的基础，玩家围绕角色卡牌进行收集和构筑。

- **主要组件**:
    - `CharacterCard.vue`: 用于展示单个角色信息的核心UI单元。
    - `AnimeCard.vue`: 用于展示角色所属番剧信息的UI单元。
    - `CardDetailModal.vue`: 提供了一个模态框，用于显示角色或卡牌的详细信息，如技能、属性、背景故事等。

### 2.2. 抽卡 (Gacha) 系统

游戏的核心变现与角色获取机制。

- **主要组件**:
    - `GachaView.vue`: 抽卡功能的主视图/入口。
    - `GachaShop.vue`: 抽卡商店界面，可能包含不同类型的卡池。
    - `UpBanner.vue`: 用于展示当前推荐或概率提升（UP）的角色卡池横幅。
    - `GachaResultModal.vue`: 用于展示单次或十连抽卡后获得的角色结果。
    - `GachaHistory.vue`: 玩家可以查看自己历史抽卡记录的界面。
    - `GachaRatesModal.vue`: 公示卡池中不同稀有度角色的抽取概率。
- **状态管理**:
    - `gachaStore.ts`: 专门管理抽卡相关的状态，如抽卡券数量、历史记录等。

### 2.3. 收藏与卡组构筑系统 (Collection & Deck Building)

玩家管理已获得角色并构筑战斗卡组的功能。

- **主要组件**:
    - `CollectionsView.vue`: 玩家收藏的入口，展示所有已获得的卡牌。
    - `CollectionPreview.vue`: 收藏的预览界面。
    - `CollectionStats.vue`: 显示收藏的统计数据（如：总角色数、稀有度分布等）。
    - `decks/DeckManager.vue`: 卡组管理的主界面，允许玩家创建、删除、切换多个卡组。
    - `decks/DeckList.vue`: 展示玩家已保存的所有卡组列表。
    - `decks/DeckEditor.vue`: 核心的卡组编辑器，玩家可在此界面中将拥有的角色拖拽、配置成一个可用于战斗的卡组。

### 2.4. 玩家状态与数据 (Player Status & Data)

管理玩家的个人信息和游戏进度。

- **主要组件**:
    - `PlayerStatus.vue`: 在UI上实时显示玩家的状态，如等级、经验值、持有的货币等。
    - `ActivityLog.vue`: 记录玩家在游戏中的关键操作或成就。
- **状态管理**:
    - `userStore.ts`: 存储用户的核心数据（ID、昵称、资产等）。
    - `gameDataStore.ts`: 存储全局的游戏数据，如所有角色的数据库。

## 3. 主要游戏视图 (Main Game Views)

游戏通过以下几个主视图将核心系统串联起来：

- `HomeView.vue`: 游戏的主页或仪表板，可能是各个系统模块的入口。
- `CollectionsView.vue`: 收藏与卡组管理页。
- `GachaView.vue`: 抽卡页。
- `BattleView.vue`: 战斗页（当前是讨论和重做的重点）。

## 4. 待讨论：战斗系统

从现有文件结构看，`BattleView.vue` 是战斗功能的承载体。但其具体实现和规则是本次需要重点讨论和设计的。

**现有基础**:

- 一个`BattleView.vue`的空壳视图。
- 一个完善的卡组构筑系统，为战斗提供了输入（玩家卡组）。

**需要讨论的核心问题**:

1.  **战斗模式**: 是PVE、PVP还是两者都有？是回合制、即时制还是其他创新模式？
2.  **核心玩法**:
    - 角色在战斗中如何行动？（自动战斗、手动释放技能？）
    - 能量/资源系统如何设计？
    - 胜负条件是什么？
3.  **角色属性与技能**:
    - 当前的角色属性（攻击、防御等）如何在战斗中生效？
    - 角色的技能效果如何设计才能体现策略性？
    - 是否需要引入“元素克制”、“职业搭配”等策略维度？
4.  **AI对手**:
    - 如何为PVE设计AI逻辑？
    - AI的行为模式和难度梯度。

---

**结论**:

当前 Demo 已经搭建了完善的“角色获取”和“战前准备”框架。下一步的重点是基于现有系统，设计一个有趣且富有策略性的战斗系统，将玩家收集和构筑的价值在战斗中体现出来。